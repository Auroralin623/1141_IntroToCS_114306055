<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>1A2B Game</title>
<style>
    body {
        font-family: Arial;
        margin: 30px;
    }
    h1 {
        color: #0077cc;
    }
    #record {
        margin-top: 15px;
        border: 1px solid black;
        width: 250px;
        padding: 10px;
    }
</style>
</head>

<body>

<h1>114306055_HW7_1A2B</h1>

<p>Enter 4 unique numbers:
    <input type="text" id="guessInput">
    <button onclick="play()">Guess!</button>
</p>

<p>Game Record :</p>
<div id="record"></div>

<script>

let answer = generateAnswer();
let attempts = 0;



function generateAnswer() {
    let digits = [0,1,2,3,4,5,6,7,8,9];
    let ans = [];

    for(let i = 0; i < 4; i++){
        let index = Math.floor(Math.random() * digits.length);
        ans.push(digits[index]);
        digits.splice(index, 1);
    }
    return ans.join("");
}

function play() {
    let input = document.getElementById("guessInput").value;

    if(!isValid(input)) {
        alert("請輸入4位不重複數字！");
        return;
    }

    attempts++;
    let result = checkAB(input, answer);

    let recordDiv = document.getElementById("record");
    recordDiv.innerHTML += "第" + attempts + "次: " + input + " → " + result + "<br>";

    if(result === "4A0B") {
        alert("恭喜答對！總共猜了 " + attempts + " 次");
    }

    document.getElementById("guessInput").value = ""; 
}

function isValid(str) {
    if(str.length !== 4) return false;
    if(!/^\d{4}$/.test(str)) return false;

    let set = new Set(str);
    return set.size === 4;
}

function checkAB(guess, ans){
    let A = 0, B = 0;

    for(let i = 0; i < 4; i++){
        if(guess[i] === ans[i]) {
            A++;
        } else if(ans.includes(guess[i])) {
            B++;
        }
    }
    return `${A}A${B}B`;
}

</script>

</body>
</html>